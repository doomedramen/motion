{"version":3,"sources":["eyes.js"],"names":["Eyes","self","container","$","Two","Resolution","eye1","width","height","appendTo","eye2","fixedEyeColor","getRandomColor","eyes","makeEye","domElement","renderer","releaseEyes","_","debounce","each","eye","parts","ball","destination","clear","$window","window","bind","mousemove","e","touch","originalEvent","changedTouches","clientX","pageX","clientY","pageY","translation","x","y","play","mouse","Vector","rect","getBoundingClientRect","center","left","top","theta","Math","atan2","distance","distanceTo","pct","radius","set","cos","sin","two","color","background","makeRectangle","noStroke","name","eyeMask","makeGroup","retina","makeCircle","fill","pupil","linewidth","reflection","lid","makeEllipse","stroke","noFill","add","mask","floor","random","map","startHeight","speed","createjs","Tween","get","to","color1","color2"],"mappings":"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","file":"eyes.32f9285e.map","sourceRoot":"..","sourcesContent":["class Eyes {\n\n    constructor() {\n\n        const self = this;\n\n        const container = $('#content')[0];\n\n        Two.Resolution = 24;\n\n        const eye1 = new Two({\n            width: 400,\n            height: 400\n        }).appendTo(container);\n        const eye2 = new Two({\n            width: 400,\n            height: 400,\n        }).appendTo(container);\n\n        // const test = new Two({\n        //     width: 400,\n        //     height: 400,\n        // }).appendTo(container);\n\n        const fixedEyeColor = self.getRandomColor();\n        self.eyes = [\n            makeEye(eye1, fixedEyeColor),\n            makeEye(eye2, fixedEyeColor),\n        ];\n\n        self.eyes[0].domElement = eye1.renderer.domElement;\n        self.eyes[1].domElement = eye2.renderer.domElement;\n\n        const releaseEyes = _.debounce(function () {\n            _.each(self.eyes, function (eye) {\n                eye.parts.ball.destination.clear();\n            });\n        }, 1000);\n\n        const $window = $(window)\n            .bind('mousemove', mousemove)\n            .bind('touchmove', function (e) {\n                const touch = e.originalEvent.changedTouches[0];\n                mousemove({\n                    clientX: touch.pageX,\n                    clientY: touch.pageY\n                });\n                return false;\n            });\n\n        eye1.bind('update', function () {\n            const eye = self.eyes[0];\n            eye.parts.ball.translation.x += (eye.parts.ball.destination.x - eye.parts.ball.translation.x) * 0.0625;\n            eye.parts.ball.translation.y += (eye.parts.ball.destination.y - eye.parts.ball.translation.y) * 0.0625;\n        }).play();\n        eye2.bind('update', function () {\n            const eye = self.eyes[1];\n            eye.parts.ball.translation.x += (eye.parts.ball.destination.x - eye.parts.ball.translation.x) * 0.0625;\n            eye.parts.ball.translation.y += (eye.parts.ball.destination.y - eye.parts.ball.translation.y) * 0.0625;\n        }).play();\n\n        function mousemove(e) {\n\n            const mouse = new Two.Vector(e.clientX, e.clientY);\n            _.each(self.eyes, function (eye) {\n                const rect = eye.domElement.getBoundingClientRect();\n                const center = {\n                    x: rect.left + rect.width / 2,\n                    y: rect.top + rect.height / 2\n                };\n                const theta = Math.atan2(mouse.y - center.y, mouse.x - center.x);\n                const distance = mouse.distanceTo(center);\n                const pct = distance / $window.width();\n                const radius = 75 * pct;\n                eye.parts.ball.destination.set(radius * Math.cos(theta), radius * Math.sin(theta));\n            });\n\n            releaseEyes();\n\n        }\n\n        function makeEye(two, color) {\n\n            const self = this;\n\n            var background = two.makeRectangle(two.width / 2, two.height / 2, two.width, two.height);\n            background.noStroke();\n            // background.fill = 'rgb(255, 255, 175)';\n            background.name = 'background';\n\n            var eyeMask = two.makeGroup(background);\n\n            const ball = two.makeGroup();\n            const eye = two.makeGroup();\n\n\n            const retina = two.makeCircle(0, 0, two.height / 4);\n            retina.fill = color || self.getRandomColor();\n            retina.noStroke();\n\n            const pupil = two.makeCircle(0, 0, two.height / 6);\n            pupil.fill = '#333';\n            pupil.linewidth = 10;\n            pupil.noStroke();\n            const reflection = two.makeCircle(two.height / 12, -two.height / 12, two.height / 12);\n            reflection.fill = 'rgba(255, 255, 255, 0.9)';\n            reflection.noStroke();\n\n            let lid = two.makeEllipse(0, 0, two.height / 3, two.height / 4);\n            lid.stroke = '#333';\n            lid.linewidth = 15;\n            lid.noFill();\n\n\n            ball.add(retina, pupil, reflection);\n            ball.destination = new Two.Vector();\n\n            eye.add(ball, lid);\n            eye.translation.set(two.width / 2, two.height / 2);\n\n\n\n            const mask = two.makeEllipse(two.width/2, two.height/2, two.height / 3, two.height / 4)\n            eye.parts = {\n                mask,\n                ball,\n                lid,\n                pupil,\n                retina\n            };\n\n            eyeMask.add(eye);\n\n            eyeMask.mask = mask;\n            return eye;\n\n        }\n    }\n\n    getRandomColor() {\n        return 'rgba('\n            + Math.floor(Math.random() * 255) + ','\n            + Math.floor(Math.random() * 255) + ','\n            + Math.floor(Math.random() * 255) + ','\n            + 0.66 + ')';\n    }\n\n    blink() {\n\n        this.eyes.map(eye => {\n\n            const startHeight = eye.parts.lid.height;\n            const speed = 100;\n\n            createjs.Tween.get(eye.parts.lid)\n                .to({height: 0}, speed)\n                .to({height: startHeight}, speed)\n\n            createjs.Tween.get(eye.parts.mask)\n                .to({height: 0}, speed)\n                .to({height: startHeight}, speed)\n\n        })\n    }\n\n    /**\n     * Change eye colors\n     * @param color1\n     * @param color2 (optional)\n     */\n    changeColors(color1, color2) {\n\n\n        this.eyes[0].parts.retina.fill = color1;\n        this.eyes[1].parts.retina.fill = color2 || color1;\n\n    }\n}\n\nwindow.Eyes = Eyes;\n"]}